### 资源管理
资源管理有比如，打开文件就要关闭文件，连接数据库也要记得释放连接。但是有时候程序会在运行途中就发生错误，如何在这种情况下仍然保证资源管理正常呢？

#### defer
1. `defer`确保在函数结束时发生，无论函数运行过程中是提前`return`了或者甚至是`panic`了
2. 如果一个函数中有多个`defer`时，后出现的`defer`先执行，这是因为`defer`都会存储到一个栈中


#### http服务器错误处理
1. 可以在handler上加一层wrapper来统一所有错误的处理


#### `Panic`
`Panic`做的事情有：
1. 停止当前函数执行
2. 一直向上返回，执行每一层的`defer`
3. 如果没有遇见`recover`，程序退出  
要谨慎使用`Panic`

#### `Recover`
1. 仅在`defer`中调用
2. 在`defer`中可以获取`panic`的值，进而决定如何处理
3. 如果无法处理，可以重新`panic`

#### `error` & `panic`
1. 能预想到的错误都用`error`，不用`panic`，比如文件打不开
2. 意料之外的用`panic`，比如数组越界


